<!-- HERO HEADER -->
<div class="configuracion-layout">

  <div class="hero-header">
    <h1>Promociones y Descuentos</h1>
    <p class="subtitle">
      Gestiona todas las promociones y descuentos disponibles en la plataforma
    </p>

    <!-- Search / Filtros -->
    <div class="search-filtro-bar">
      <div class="search-container">
        <input
          type="text"
          class="search-input"
          placeholder="Buscar promociones..."
          [(ngModel)]="terminoBusqueda"
          (input)="buscarPromociones()">
        <i class="search-icon"></i>
      </div>

      <div class="filtro-options">
        <button class="filtro-btn" [class.active]="filtroActual === 'todas'" (click)="aplicarFiltro('todas')">Todas</button>
        <button class="filtro-btn" [class.active]="filtroActual === 'codigo'" (click)="aplicarFiltro('codigo')">C贸digo</button>
        <button class="filtro-btn" [class.active]="filtroActual === 'automatica'" (click)="aplicarFiltro('automatica')">Autom谩tica</button>
        <button class="filtro-btn" [class.active]="filtroActual === 'activas'" (click)="aplicarFiltro('activas')">Activas</button>
      </div>
    </div>
  </div>

  <!-- BOTN -->
  <div class="header-actions">
    <button class="btn btn-primary" (click)="abrirCrear()">
      + Agregar promoci贸n
    </button>
  </div>

  <!-- GRID PROMOCIONES -->
  <div class="cards-grid">
    <div class="config-card" *ngFor="let promo of promocionesFiltradas">

      <img
        src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTCGZlr4gLcP_lnP-wXWHiXholmsGihWJOqfA&s"
        alt="Promoci贸n"
        class="card-image">

      <span class="descuento-badge">
        -{{ promo.discountValue }}%
      </span>

      <div class="card-content">
        <h4>{{ promo.namePromotion }}</h4>

        <p>
          C贸digo:
          <strong>
            {{ promo.typePromotion === 'CODIGO' ? promo.promoCode : 'Autom谩tica' }}
          </strong>
        </p>

        <p>
          {{ promo.startDate | date }} - {{ promo.endDate | date }}
        </p>

        <span class="card-badge">
          {{ promo.typePromotion === 'CODIGO' ? 'C贸digo' : 'Autom谩tica' }}
        </span>
      </div>

      <div class="card-actions">
        <button class="btn btn-primary" (click)="abrirModalEditar(promo)">Editar</button>
        <button class="btn btn-cancelar" (click)="eliminarPromocion(promo.idPromotion)">Eliminar</button>
      </div>

    </div>
  </div>
</div>

<!-- MODAL -->
<div *ngIf="mostrarModal" class="modal-backdrop">
  <div class="modal">

    <h2>{{ modoEdicion ? 'Editar Promoci贸n' : 'Crear Promoci贸n' }}</h2>

    <form class="modal-form">

      <div>
        <label>Nombre *</label>
        <input [(ngModel)]="form.namePromotion" name="namePromotion">
      </div>

      <div>
        <label>Tipo de promoci贸n *</label>
        <select [(ngModel)]="form.typePromotion" name="typePromotion">
          <option value="">Seleccione</option>
          <option value="CODIGO">C贸digo</option>
          <option value="AUTOMATICA">Autom谩tica</option>
        </select>
      </div>

      <div *ngIf="form.typePromotion === 'CODIGO'">
        <label>C贸digo promocional *</label>
        <input [(ngModel)]="form.promoCode" name="promoCode">
      </div>

      <div>
        <label>Valor del descuento</label>
        <input type="number" [(ngModel)]="form.discountValue" name="discountValue">
      </div>

      <div>
        <label>Fecha inicio *</label>
        <input type="date" [(ngModel)]="form.startDate" name="startDate">
      </div>

      <div>
        <label>Fecha fin *</label>
        <input type="date" [(ngModel)]="form.endDate" name="endDate">
      </div>

    </form>

    <div class="modal-actions">
      <button class="btn btn-cancelar" (click)="cerrarModal()">Cancelar</button>
      <button class="btn btn-primary" (click)="guardar()">
        {{ modoEdicion ? 'Actualizar' : 'Crear' }}
      </button>
    </div>

  </div>
</div>
