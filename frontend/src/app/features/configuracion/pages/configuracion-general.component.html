<div class="configuracion-layout">

  <!-- HERO HEADER -->
  <div class="hero-header">
    <h1>Configuraci칩n General</h1>
    <p class="subtitle">Gestiona todos los par치metros de tu plataforma desde un solo lugar</p>
    
    <!-- Search/Filtro Bar -->
    <div class="search-filtro-bar">
      <div class="search-container">
        <input type="text" class="search-input" placeholder="Buscar configuraci칩n..." [(ngModel)]="terminoBusqueda" (input)="buscarConfiguracion()">
        <i class="search-icon">游댌</i>
      </div>
      <div class="filtro-options">
        <button class="filtro-btn" [class.active]="filtroActual === 'todas'" (click)="aplicarFiltro('todas')">Todas</button>
        <button class="filtro-btn" [class.active]="filtroActual === 'plataforma'" (click)="aplicarFiltro('plataforma')">Plataforma</button>
        <button class="filtro-btn" [class.active]="filtroActual === 'negocio'" (click)="aplicarFiltro('negocio')">Negocio</button>
        <button class="filtro-btn" [class.active]="filtroActual === 'legales'" (click)="aplicarFiltro('legales')">Legal</button>
      </div>
    </div>
  </div>

  <form (ngSubmit)="guardarConfiguracion()" #configForm="ngForm" class="config-form">
    <!-- ================= PLATAFORMA ================= -->
    <div class="config-card" *ngIf="mostrarSeccion('plataforma')">
      <div class="card-header" (click)="toggleSection('plataforma')">
        <h3><i class="icon-settings"></i> Par치metros de la Plataforma</h3>
        <div class="card-toggle">
          <i [class]="getSectionIcon('plataforma')"></i>
        </div>
      </div>

      <div class="card-content" [class.expanded]="isSectionExpanded('plataforma')">
        <div class="form-grid">
          <div class="form-group">
            <label for="nombreComercial">Nombre Comercial</label>
            <input 
              type="text" 
              id="nombreComercial" 
              name="nombreComercial"
              [(ngModel)]="configData.nombreComercial" 
              class="form-control"
              placeholder="Nombre de la plataforma">
            <span class="input-helper">Nombre que se mostrar치 en la plataforma</span>
          </div>

          <div class="form-group">
            <label for="logo">Logo</label>
            <input 
              type="url" 
              id="logo" 
              name="logo"
              [(ngModel)]="configData.logo" 
              class="form-control"
              placeholder="https://ejemplo.com/logo.png">
            <span class="input-helper">URL del logo (se mostrar치 una vista previa)</span>
            
            <div class="logo-preview" *ngIf="configData.logo">
              <img [src]="configData.logo" [alt]="'Logo de ' + configData.nombreComercial" class="logo-image">
            </div>
          </div>

          <div class="form-group full-width">
            <label>Colores B치sicos</label>
            <div class="color-pickers">
              <div class="color-picker-item">
                <label>Primario</label>
                <div class="color-picker-wrapper">
                  <input 
                    type="color" 
                    name="colorPrimario"
                    [(ngModel)]="configData.colores.primario" 
                    class="color-input">
                  <span class="color-value">{{configData.colores.primario}}</span>
                </div>
              </div>
              
              <div class="color-picker-item">
                <label>Secundario</label>
                <div class="color-picker-wrapper">
                  <input 
                    type="color" 
                    name="colorSecundario"
                    [(ngModel)]="configData.colores.secundario" 
                    class="color-input">
                  <span class="color-value">{{configData.colores.secundario}}</span>
                </div>
              </div>
              
              <div class="color-picker-item">
                <label>Fondo</label>
                <div class="color-picker-wrapper">
                  <input 
                    type="color" 
                    name="colorFondo"
                    [(ngModel)]="configData.colores.fondo" 
                    class="color-input">
                  <span class="color-value">{{configData.colores.fondo}}</span>
                </div>
              </div>
            </div>
          </div>

          <div class="form-group">
            <label for="emailContacto">Email de Contacto</label>
            <input 
              type="email" 
              id="emailContacto" 
              name="emailContacto"
              [(ngModel)]="configData.contacto.email" 
              class="form-control"
              placeholder="contacto@ejemplo.com">
          </div>

          <div class="form-group">
            <label for="telefonoContacto">Tel칠fono de Contacto</label>
            <input 
              type="tel" 
              id="telefonoContacto" 
              name="telefonoContacto"
              [(ngModel)]="configData.contacto.telefono" 
              class="form-control"
              placeholder="+1 234 567 8900">
          </div>

          <div class="form-group full-width">
            <label for="direccionContacto">Direcci칩n</label>
            <input 
              type="text" 
              id="direccionContacto" 
              name="direccionContacto"
              [(ngModel)]="configData.contacto.direccion" 
              class="form-control"
              placeholder="Calle 123, Ciudad, Pa칤s">
          </div>
        </div>
      </div>
    </div>

    <!-- ================= LEGALES ================= -->
    <div class="config-card" *ngIf="mostrarSeccion('legales')">
      <div class="card-header" (click)="toggleSection('legales')">
        <h3><i class="icon-document"></i> Textos Legales</h3>
        <div class="card-toggle">
          <i [class]="getSectionIcon('legales')"></i>
        </div>
      </div>

      <div class="card-content" [class.expanded]="isSectionExpanded('legales')">
        <div class="form-grid">
          <div class="form-group full-width">
            <label for="terminos">T칠rminos y Condiciones</label>
            <textarea 
              id="terminos" 
              name="terminos"
              [(ngModel)]="configData.textosLegales.terminos" 
              class="form-control textarea-lg"
              rows="6"
              placeholder="T칠rminos y condiciones de la plataforma"></textarea>
            <span class="input-helper">Estos t칠rminos se mostrar치n a los usuarios durante el proceso de compra</span>
          </div>

          <div class="form-group full-width">
            <label for="politica">Pol칤tica de Privacidad</label>
            <textarea 
              id="politica" 
              name="politica"
              [(ngModel)]="configData.textosLegales.politica" 
              class="form-control textarea-lg"
              rows="6"
              placeholder="Pol칤tica de privacidad"></textarea>
            <span class="input-helper">Informaci칩n sobre c칩mo se manejan los datos personales</span>
          </div>

          <div class="form-group full-width">
            <label for="mensajesCompra">Mensajes Informativos en la Compra</label>
            <textarea 
              id="mensajesCompra" 
              name="mensajesCompra"
              [(ngModel)]="configData.textosLegales.mensajesCompra" 
              class="form-control textarea-md"
              rows="4"
              placeholder="Mensajes informativos que se mostrar치n durante la compra"></textarea>
            <span class="input-helper">Mensajes que aparecer치n durante el proceso de compra</span>
          </div>
        </div>
      </div>
    </div>

    <!-- ================= NEGOCIO ================= -->
    <div class="config-card" *ngIf="mostrarSeccion('negocio')">
      <div class="card-header" (click)="toggleSection('negocio')">
        <h3><i class="icon-business"></i> Configuraci칩n de Negocio</h3>
        <div class="card-toggle">
          <i [class]="getSectionIcon('negocio')"></i>
        </div>
      </div>

      <div class="card-content" [class.expanded]="isSectionExpanded('negocio')">
        <div class="form-grid">
          <div class="form-group">
            <label for="moneda">Moneda por Defecto</label>
            <select 
              id="moneda" 
              name="moneda"
              [(ngModel)]="configData.negocio.moneda" 
              class="form-control">
              <option value="USD">USD - D칩lar Estadounidense</option>
            </select>
          </div>

          <div class="form-group">
            <label for="limiteTickets">L칤mite de Tickets por Cliente por Evento</label>
            <input 
              type="number" 
              id="limiteTickets" 
              name="limiteTickets"
              [(ngModel)]="configData.negocio.limiteTickets" 
              class="form-control"
              min="1"
              max="100"
              placeholder="N칰mero m치ximo de tickets">
            <span class="input-helper">Cantidad m치xima de tickets que un cliente puede comprar por evento</span>
          </div>

          <div class="form-group checkbox-group">
            <div class="checkbox-wrapper">
              <label class="checkbox-container">
                <input 
                  type="checkbox" 
                  name="transporteHabilitado"
                  [(ngModel)]="configData.negocio.transporteHabilitado">
                <span class="checkmark"></span>
                Activar venta de transporte
              </label>
            </div>
            <span class="input-helper">Permitir la venta de servicios de transporte en la plataforma</span>
          </div>

          <div class="form-group checkbox-group">
            <div class="checkbox-wrapper">
              <label class="checkbox-container">
                <input 
                  type="checkbox" 
                  name="productosHabilitados"
                  [(ngModel)]="configData.negocio.productosHabilitados">
                <span class="checkmark"></span>
                Activar venta de productos adicionales
              </label>
            </div>
            <span class="input-helper">Habilitar la venta de productos adicionales junto con los tickets</span>
          </div>
        </div>
      </div>
    </div>

    <!-- ================= BOT칍N ================= -->
    <div class="form-actions">
      <button type="submit" class="btn btn-primary">
        Guardar Configuraci칩n
      </button>
    </div>
  </form>
</div>
