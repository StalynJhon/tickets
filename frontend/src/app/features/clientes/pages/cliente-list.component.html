<div class="configuracion-layout">

  <!-- HERO -->
  <div class="hero-header">
    <h1>GestiÃ³n de Clientes</h1>
    <p class="subtitle">AdministraciÃ³n y control de clientes registrados</p>

    <div class="search-filtro-bar">
      <div class="search-container">
        <span class="search-icon">ğŸ”</span>
        <input
          class="search-input"
          type="text"
          placeholder="Buscar cliente..."
          [(ngModel)]="terminoBusqueda"
          (input)="buscarClientes()"
        />
      </div>

      <button class="btn btn-primary" (click)="abrirModalCrear()">
        + Nuevo Cliente
      </button>
    </div>
  </div>

  <!-- LISTA DE CLIENTES -->
  <div class="cards-container">
    <div class="config-card" *ngFor="let cliente of clientesFiltrados">
      <div class="menu-container">
        <button class="menu-btn" (click)="cliente.menu = !cliente.menu">â‹®</button>
        <div class="menu" *ngIf="cliente.menu">
          <button (click)="abrirModalEditar(cliente)">Editar</button>
          <button (click)="eliminarCliente(cliente.idClientes)">Eliminar</button>
          <button (click)="cambiarEstado(cliente)">
            {{ cliente.stadoCliente === 'activo' ? 'Desactivar' : 'Activar' }}
          </button>
        </div>
      </div>

      <div class="card-content">
        <h3>{{ cliente.nombreCliente }}</h3>
        <p><strong>CÃ©dula:</strong> {{ cliente.cedulaCliente }}</p>
        <p><strong>Usuario:</strong> {{ cliente.usernameCliente }}</p>
        <p><strong>Email:</strong> {{ cliente.emailCliente || 'â€”' }}</p>
        <p><strong>TelÃ©fono:</strong> {{ cliente.telefonoCliente || 'â€”' }}</p>
        <p><strong>DirecciÃ³n:</strong> {{ cliente.direccionCliente || 'â€”' }}</p>

        <span
          class="estado"
          [ngClass]="{
            'activo': cliente.stadoCliente === 'activo',
            'inactivo': cliente.stadoCliente === 'inactivo'
          }"
        >
          {{ cliente.stadoCliente | titlecase }}
        </span>
      </div>
    </div>
  </div>
</div>

<!-- MODAL CREAR / EDITAR -->
<div class="modal-backdrop" *ngIf="mostrarModal">
  <div class="modal">
    <h2>{{ editando ? 'Editar Cliente' : 'Nuevo Cliente' }}</h2>

    <form (ngSubmit)="guardarCliente()">

      <input
        type="text"
        placeholder="CÃ©dula"
        [(ngModel)]="clienteForm.cedulaCliente"
        name="cedulaCliente"
        required
      />

      <input
        type="text"
        placeholder="Nombre"
        [(ngModel)]="clienteForm.nombreCliente"
        name="nombreCliente"
        required
      />

      <input
        type="text"
        placeholder="Usuario"
        [(ngModel)]="clienteForm.usernameCliente"
        name="usernameCliente"
        required
      />

      <input
        *ngIf="!editando"
        type="password"
        placeholder="ContraseÃ±a"
        [(ngModel)]="clienteForm.passwordCliente"
        name="passwordCliente"
        required
      />

      <input
        type="email"
        placeholder="Correo"
        [(ngModel)]="clienteForm.emailCliente"
        name="emailCliente"
      />

      <input
        type="text"
        placeholder="TelÃ©fono"
        [(ngModel)]="clienteForm.telefonoCliente"
        name="telefonoCliente"
      />

      <input
        type="text"
        placeholder="DirecciÃ³n"
        [(ngModel)]="clienteForm.direccionCliente"
        name="direccionCliente"
      />

      <div class="acciones">
        <button type="button" class="btn btn-cancelar" (click)="cerrarModal()">Cancelar</button>
        <button type="submit" class="btn btn-primary">Guardar</button>
      </div>

    </form>
  </div>
</div>
